YUI.add("keyboard-manager",function(e){var t=e.KeyboardManager=function(){var t=this;this.keyEventScope=["*"],e.on("flickr:setKeyEventScope",function(e){t.setCurrentKeyEventScope(e)}),e.on("flickr:removeKeyEventScope",function(e){t.removeCurrentKeyEventScope(e)})},n;t.prototype={on:function(t,n,r){return typeof r=="undefined"&&(r=n,n=null),e.one("doc").on("key",this.handleKey.bind(this,r,n),t)},handleKey:function(e,t,r){if(r.metaKey||r.altKey||r.shiftKey||r.ctrlKey)return;if(this.inputHasFocus())return;var i=n.get(r,"keyEventScope");i||(i=this.getCurrentKeyEventScope(),n.add(r,{keyEventScope:i})),t===i&&e(r)},inputHasFocus:function(){var t,n=/^text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color$/i,r;try{t=e.one(document.activeElement)}catch(i){return!1}return t?(r=t.get("tagName").toUpperCase(),r==="INPUT"?n.test(t.get("type")):r==="TEXTAREA"||r==="SELECT"?!0:t.getAttribute("contenteditable")||!1):!1},setCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);t===-1?this.keyEventScope.push(e):this.keyEventScope=this.keyEventScope.slice(0,t+1)},getCurrentKeyEventScope:function(){return this.keyEventScope.slice(-1)[0]},getKeyEventScopeStack:function(){return this.keyEventScope},removeCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);t>-1&&(this.keyEventScope=this.keyEventScope.slice(0,t))},resetCurrentKeyEventScope:function(e){this.keyEventScope=["*"]}},n=function(){function r(e){var t;switch(e.type){case"key":t=e.which+e.pageX+e.pageY;break;default:t=e.type+e.pageX+e.pageY}return t}function i(e){delete t[e]}var t={},n=1;return{add:function(s,o){var u,a=r(s),f;e.Lang.isObject(s)&&e.Lang.isObject(s._event)&&e.Lang.isObject(o)&&(f=e.later(n,this,i,a),u=t[a]||{},e.mix(u,o,!0),u.timer&&u.timer.cancel(),u.timer=f,t[a]=u)},get:function(s,o){var u=r(s),a=t[u]||{};return a.timer&&a.timer.cancel(),a.timer=e.later(n,this,i,u),o?a[o]:a}}}()},"@VERSION@",{requires:["event-key"]});
YUI.add("client-app",function(e){function r(r){if(typeof r=="undefined")return e.Promise.reject({message:"Invalid config object supplied, was undefined."});var a=r.initialView,f=r.modelExport,c,h,p=r.auth,d=this;return p&&r.auth.signedIn?c=r.auth.csrf:c=null,e.config.flickr.csrf.token=c,e.config.flickr.requestConfig={auth:p},i(["rb","welcome"]),a&&a.name&&a.name==="cameraroll-page-view"&&s(r.reqId),window.location.search&&window.location.search.match(/yc=/)&&(h=e.QueryString.parse(window.location.search.replace("?","")),e.config.flickr.ycParam=h.yc),e.transportFactory=function(n){return new e.ClientTransport},o(a.name,e).then(function(){return u(a.name,p,f,r.params)}).then(function(){return l(a,t,n)}).then(function(){window.onbeforeunload=function(){if(t.inProgressAPIWriteCalls.length>0){if(t.inProgressAPIWriteCalls.length===1&&(t.inProgressAPIWriteCalls.indexOf("flickr.photos.addView")>-1||t.inProgressAPIWriteCalls.indexOf("flickr.groups.updateViewDate")>-1))return;return e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod?d.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})+" In progress API Methods: "+t.inProgressAPIWriteCalls.join(", "):d.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})}e.Storage.Instance.clear()}})}function i(t){var n=window.location,r=window.history,i,s,o=!1;n.search&&r.replaceState&&(i=e.QueryString.parse(n.search.replace("?","")),t.forEach(function(e){e in i&&(delete i[e],o=!0)}),o&&(s=e.QueryString.stringify(i),r.replaceState({},"",n.pathname+(s?"?"+s:""))))}function s(t){var n=window.location,r=window.history,i,s;r.replaceState&&(n.search?i=e.QueryString.parse(n.search.replace("?","")):i={},i.r=t,s=e.QueryString.stringify(i),r.replaceState({},"",n.pathname+(s?"?"+s:"")))}function o(e,t){return t.betterUse(e,t)}function u(r,i,s,o){var u={},l;return e.Views&&e.Views[r]&&(u[r]={type:e.Views[r],preserve:!1}),n=new e.App({serverRouting:!0,viewContainer:"#content",container:"#content",linkSelector:":not(.server-only-link)",scrollToTop:!1,views:u}),e.FlickrClientMetrics.gatherColdStartData(),l=a(),o.auth=i,o.flapp=n,t=f(o),t.clientMetrics=new e.FlickrClientMetrics(t),t.apiMetrics=new e.FlickrAPIMetrics(t),e.ClientTransport.authorize(t),t.modelImportExport.importAll(s)}function a(){return new e.FlickrRouter(n,e.config.flickr.routes)}function f(t){return window.appContext=new e.AppContext(t),window.appContext}function l(r){return new e.Promise(function(i,s){setTimeout(function(){s()},1e4),r.params.appContext=t,n.showContent(e.one("#content > .view"),{view:{name:r.name,config:r.params}},function(n){n._params.keyEventScope=n.name+n._yuid,n.setViewDataOnHistory("referrer",document.referrer),n.initialize().then(function(){e.Flog&&e.Flog.timeEnd("Total time to activation"),g(),b(),t.getKeyboardManager().setCurrentKeyEventScope(n.name+n._yuid),t.flipper.isFlipped("lighthouse")&&m(),p(),i()}).then(null,function(e){throw t.fatal("[showContent] There was a problem initializing or activating the view.",e&&e.message?e.message:e,e&&e.stack?e.stack:""),s(),e})}),n.before("navigate",c),n.before("activeViewChange",d),e.on("history:change",h),n.after("activeViewChange",v)})}function c(n){t.setPreviousURL(),t.flipper.isFlipped("enable-loader-bar")&&e.loaderBar.start(),t.clientMetrics.start(n.details[0].url),t.adManager.isEnabled()&&t.adManager.currentlyShowingAd&&t.adManager.adIsUnloading(),t.getKeyboardManager().resetCurrentKeyEventScope(),e.Object.each(t.modelRegistries,function(e,t){e.hasWeakSubscribers&&e.removeWeakSubscribers()})}function h(n){e.Object.each(t.modelRegistries,function(e,t){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),n.src==="popstate"&&p()}function p(){e.UA.chrome>0&&(window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1))}function d(e){this.get("activeView").beforeDestroy&&this.get("activeView").beforeDestroy(),n.set("previousView",e.prevVal)}function v(e){var n=this.get("activeView");n.updateHead(),n.getViewDataFromHistory("referrer")===undefined&&n.setViewDataOnHistory("referrer",t.getPreviousURL()),t.clientMetrics.end(),y(),b(),t.adManager.setAdCouldBeShown(!1)}function m(){var r=["lighthouse"];e.use(r,function(e){var r,i=n.get("activeView");r={spaceId:i.get("spaceid"),pageId:i.name.replace(/-/g,"_"),hostname:e.config.flickr.host["instance hostname"]||e.config.flickr.host.hostname,uuid:e.config.flickr.request.idShort,paft:t.flipper.isFlipped("paft"),clientMetrics:t.clientMetrics,signedIn:t.getViewer().signedIn},t.Lighthouse=new e.Lighthouse(r)})}function g(r){e.rapidTracker.getConf(n.get("activeView"),t,r).then(function(t){e.rapidTracker.init(t)})}function y(t){e.rapidTracker.destroy(),g(t)}function b(){var t={c1:2,c2:7241469,c3:"",c4:encodeURIComponent(w(document.location)),c5:n.get("activeView").get("spaceid"),c6:"",c15:""};e.comscore&&e.comscore.beacon&&e.comscore.beacon(t)}function w(t){var n=t.pathname||"",r=(n.match(/^\/photos\/([^\/]+)/)||[])[1]||null,i;return r&&r!=="friends"&&(i=e.murmurhash(r,r+"secret insecure salt"),n=n.replace(r,i)),e.config.flickr.url.host+n}var t,n;e.ClientApp={init:r,_loadInitialView:o,langBundles:["client-app"]},e.mix(e.ClientApp,e.Localizable)},"@VERSION@",{requires:["app-base","app-content","router","app-context","client-transport","flickr-router","flickr-client-metrics","flickr-api-metrics","handlebars-helpers","comscore","loader-bar","murmurhash","node","rapid","site-key","csrf-updater","better-use","flickr-promise","global-events","querystring-parse-simple","querystring-stringify-simple","storage-helper","keyboard-manager"],affinity:"client",langBundles:["client-app"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.16.0",{requires:["base-base","pluginhost"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"3.16.0",{requires:["yui-base"]});
YUI.add("flickr-view",function(e,t){function n(t,n,r,i,s){return e.namespace("Views"),e.Views[t]&&e.Flog.warn("[flickr-view] ["+t+"] A view with this name already exists. Did you mean to redefine it?"),i.destroy&&i.destroy!==e.FlickrView.prototype.destroy&&e.Flog.warn("[flickr-view] ["+t+"] `destroy` method was overridden. Did you mean `destructor`?"),i.initialize&&i.initialize!==e.FlickrView.prototype.initialize&&e.Flog.warn("[flickr-view] ["+t+"] `initialize` method was overridden. Did you mean `initializer`?"),e.Views[t]=e.Base.create(t,n,r,i,s),e.Views[t]}e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,initializer:function(e){return this.appContext=e.appContext,delete e.appContext,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this.isErrorBuilt=!1,this.nonDealbreakerSubviewsWithLoadingError={},this._params=e||{},this.subviews={},this._eventHandles=[],this},initialize:function(e){var t=this;return this.isErrorBuilt=!1,this.serverRendered=e&&e.serverRendered?e.serverRendered:!1,YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",function(e){t.normalizedActivate()})),this.setupSubviews().then(function(){if(t.isErrorBuilt)throw new Error("Subview of "+t.name+" causing loadState error");var e=t.loadState();if(!e)throw new Error("View "+t.name+" loadState function does not return a promise");return e}).then(function(){(YUI.Env.isServer||!t.get("container").hasClass("requiredToShowOnServer"))&&t.buildContainer(),t.isBuilt=!0,t.isErrorBuilt=!1,t.fire("loadingSuccess")},function(e){throw t.fire("loadingError"),t.buildErrorContainer(),t.isErrorBuilt=!0,t.appContext.error("Error loading state of",t.name),t.appContext.error(e.message),t.appContext.error(e.stack),e}).then(function(){return t.buildHeadContainer(),YUI.Env.isServer||t.normalizedActivate(),t},function(e){throw YUI.Env.isServer||t.normalizedActivate(),e})},render:function(){return this},buildHeadContainer:function(){return this.set("headContainer",""),this},attachKeyEvent:function(e,t,n){this.registerEventHandler(this.appContext.getKeyboardManager().on(e,n||this._params.keyEventScope||"*",t.bind(this)))},setContainerHTML:function(e){var t=this;return this.get("container").setHTML(e),YUI.Env.isServer||(this.get("container").generateID(),Object.keys(this.subviews||{}).forEach(function(e,n,r){var i=t.subviews[e],s=i.get("container"),o=i.getId?i.getId():s._yuid,u=t.get("container").one("#"+o);u&&u.replace(s)})),this},setupSubviews:function(){var t=this,n,r=[],i,s={};return this.subviewConfig?(Object.keys(this.subviewConfig).forEach(function(e){if(typeof t.subviewConfig[e].disabled=="undefined"||(typeof t.subviewConfig[e].disabled=="function"?!t.subviewConfig[e].disabled.call(t):!t.subviewConfig[e].disabled))s[e]=t.subviewConfig[e]}),n=Object.keys(s).map(function(n){YUI.Env.isServer?i=s[n].requiredToShowOnServer||s[n].requiredToShow:i=s[n].requiredToShowOnClient||s[n].requiredToShow;var o=e.merge(t._params,s[n]);i?r.push(t.instantiateSubview(n,o).then(function(e){return t.setupSubview(n,o,e)})):r.push(t.instantiateSubview(n,o).then(function(e){YUI.Env.isServer||t.setupSubview(n,o,e)}))}).filter(function(e){return!!e}),r.length?e.Promise.all(r):e.Promise.resolve()):e.Promise.resolve()},registerSubview:function(e,t){t||(t=e.name),this.subviews[t]=e},instantiateSubview:function(e,t){var n=this;return t.container=this.getContainer({subviewName:e,subviewParams:t}),this.appContext.getView(e,t).then(function(t){return t.on("loadingError",n.handleSubviewLoadingError.bind(n)),t.on("loadingSuccess",n.handleSubviewLoadingSuccess.bind(n)),t.on("subviewViewEvent",n.handleSubviewEvent.bind(n,t.name)),t.on("parentViewEvent",n.handleParentViewEvent.bind(t,t.name)),n.registerSubview(t,e),t._params.keyEventScope=n._params.keyEventScope,t})},onSubviewEvent:function(e,t){return!0},onParentViewEvent:function(e,t){return!0},handleSubviewEvent:function(e,t){var n=t?t.details||[]:[];this.onSubviewEvent(e,n)!==!1&&this.fire.apply(this,["subviewViewEvent"].concat(n))},handleParentViewEvent:function(e,t){var n=t?t.details||[]:[],r,i=this;if(this.onParentViewEvent(e,n)!==!1)for(r in this.subviews)i.subviews[r].fire.apply(i.subviews[r],["parentViewEvent"].concat(n))},handleSubviewLoadingSuccess:function(e){this.nonDealbreakerSubviewsWithLoadingError[e.target.name]&&delete this.nonDealbreakerSubviewsWithLoadingError[e.target.name]},handleSubviewLoadingError:function(e){this.subviewConfig[e.target.name].dealbreaker?this.hasDealbreakerSubviewLoadingError=!0:this.nonDealbreakerSubviewsWithLoadingError[e.target.name]="",!this.isErrorBuilt&&(this.hasDealbreakerSubviewLoadingError||Object.keys(this.nonDealbreakerSubviewsWithLoadingError).length>=2)&&(this.fire("loadingError"),this.buildErrorContainer(),this.isErrorBuilt=!0,this.appContext.error(e.target.name+" forced the error loading state of view "+this.name))},deferredSubviewInstantiation:function(e,t){var n=this;return this.instantiateSubview(e,t).then(function(e){return e.initialize()}).then(function(t){n.subviews[e]=t,t.buildContainer(),(n.subviewConfig[e].additionalViewClasses||[]).forEach(function(e){t.get("container").addClass(e)}),n.buildContainer(),n.activate()},function(e){throw n.buildErrorContainer(),n.isErrorBuilt=!0,n.normalizedActivate(),n.appContext.error("Error loading state of view ",n.name),n.appContext.error(e.message),n.appContext.error(e.stack),e})},setupSubview:function(t,n,r){var i=this;return n=e.merge(n||{}),n.alreadyRendered=i.alreadyRendered,r.initialize(n).then(function(){return i.subviews[t]},function(e){i.appContext.error("Error getting/initializing view ",t," of ",i.name,e.message,e.stack),i.appContext.error(e.message),i.appContext.error(e.stack)})},attachEvents:function(t){if(!t)return;var n={},r=this;Object.keys(t).forEach(function(i){var s,o;s={selector:(i.match(/([\w-_\#\.\[\]~|$^*= ]+) /i)||[])[1
]||"[data-action]",type:(i.match(/([\w]+):/i)||[])[1]||"click",action:(i.match(/:([\w]+)/i)||[])[1]||"_default_"},o=s.selector+"/"+s.type,n[o]||(n[o]={},r.registerEventHandler(r.get("container").delegate(s.type,function(t){var i,u,a,f;i=t.target.ancestor(s.selector,!0);if(s.type==="click"){u=t.target.ancestor(".server-only-link",!0);if(u){if(t.metaKey===!0||t.ctrlKey===!0)return;e.config.win.location=u.get("href");return}}if(!i)return;a=i.getData()||{},f=a.action||"_default_";if(!n[o].hasOwnProperty(f))return;if(!n[o][f])throw new Error('Handler for "'+f+'" UI event is undefined');n[o][f].call(r,t,a)},s.selector))),n[o][s.action]=t[i]})},registerEventHandler:function(t){if(e.Lang.isFunction(t.detach))return this._eventHandles.push(t),t},detachRegisteredEvent:function(t){var n=this._eventHandles.indexOf(t);n!==-1&&e.Lang.isFunction(t.detach)&&(t.detach(),this._eventHandles.splice(n,1))},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach(function(e){e.detach()}),this._eventHandles=[])},generateSignature:function(t,n){var r={},i;return e.Object.each(n,function(e,t){t!=="container"&&t!=="appContext"&&t!=="context"&&t!=="parentView"&&t!=="keyEventScope"&&typeof e!="undefined"&&typeof e!="function"&&(r[t]=typeof e=="object"?1:e)}),i=t+"__"+Object.keys(r).sort().map(function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(r[e])}).join("__"),i},getContainer:function(t){t=t||{},t.subviewParams=t.subviewParams||{};var n,r,i=["view",t.subviewName||t.viewName||this.name],s,o=t.subviewName?t.subviewParams.additionalViewClasses:this.additionalViewClasses,u,a=t.subviewParams.preferredViewTag||"div";return(t.subviewParams.requiredToShowOnServer||t.subviewParams.requiredToShow)&&YUI.Env.isServer&&i.push("requiredToShowOnServer"),this.theme&&i.push(this.theme),e.Lang.isArray(o)&&o.length?i=i.concat(o):e.Lang.isFunction(o)&&(u=o.call(this),e.Lang.isArray(u)&&u.length&&(i=i.concat(u))),i=' class="'+i.join(" ")+'"',t.subview?n=t.subview.getId():t.subviewName&&t.subviewParams&&(n=this.generateSignature(t.subviewName,t.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){switch(e){case"innerHTML":return this.html;case"outerHTML":return"<"+a+" "+i+(s?' style="'+Object.keys(s).reduce(function(e,t,n,r){return e+t+": "+s[t]+(n<r.length-1?"; ":"")},"")+'"':"")+(n?' data-view-signature="'+n+'"':"")+">"+this.html+"</"+a+">"}return null},hasChildNodes:function(){return!1},addClass:function(e){i=i.slice(0,-1)+" "+e+'"'},hasClass:function(e){var t=i.split('"')[1],n=t.split(" ");return n.indexOf(e)>-1},removeClass:function(e){var t=i.split('"')[1],n=t.split(" "),r=n.indexOf(e);r!==-1&&(n.splice(r,1),i=' class="'+n.join(" ")+'"')},setStyle:function(e,t){s||(s={}),s[e]=t},setStyles:function(e){s||(s={}),Object.keys(e).forEach(function(t){s[t]=e[t]})},appendChild:function(e){this.html+=e.html},all:function(){return{each:function(){}}},one:function(){return null}}:(n&&(r=this.get("container").one('[data-view-signature="'+n+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+a+" "+i+"></"+a+">")),r},renderSubviews:function(){var e={},t=this;return Object.keys(this.subviews).forEach(function(e,n,r){try{t.subviews[e].render()}catch(i){t.appContext.error("Error rendering view",e,"of",t.name,i.message,i.stack)}}),e},templates:function(t){var n=e.Template.get("hermes/"+t),r=this.getLangBundles();return r.locales=this.appContext.lang||this.defaultLang,typeof n!="function"&&this.appContext.error("Template not found:",t),function(e){return e=e||{},n(e,{data:{intl:r}})}},loadState:function(){return e.Promise.resolve()},updateHead:function(){this.get("headContainer")!==null&&(e.one("head").all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return(this.isBuilt||this.isErrorBuilt)&&!this.isActivated&&!this.isErrorActivated&&this.isActiveAndInDOM()&&(e=!0),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&(this.get("isActiveViewAgnostic")||this.appContext.flapp.get("activeView").get("container").contains(e))&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,t,n=this;for(e in this.subviews){t=n.subviews[e];try{t.normalizedActivate(),t.recursivelyActivateSubviews()}catch(r){this.appContext.error("Error activating view ",e," of ",this.name,r.message,r.stack)}}return this},recursivelyActivateSubviews:function(e){var t,n,r=e||this.subviews,i=this;for(t in r){n=r[t];if(n.canActivate()){n.normalizedActivate();try{n.normalizedActivate(),i.recursivelyActivateSubviews(n.subviews)}catch(s){this.appContext.error("Error activating view ",n," of ",this.name,s.message,s.trace)}}}return this},normalizedActivate:function(){this.canActivate()&&(this.isErrorBuilt?(this.isErrorActivated=!0,this.activateErrorContainer()):(e.rapidTracker.refreshTracker(),this.activate(),this.isActivated=!0,this.activateSubviews()))},buildErrorContainer:function(){this.setContainerHTML("")},activateErrorContainer:function(){var e=this,t=this.get("container").one(".retry");t&&t.on("click",function(t){t.preventDefault(),e.isErrorActivated=!1,e.initialize()})},setViewDataOnHistory:function(t,n){var r={};return typeof history!="undefined"?(history.state!==null&&typeof history.state.flickr!="undefined"&&(r=history.state.flickr),typeof r[this.name]=="undefined"&&(r[this.name]={}),r[this.name][t]=n,history.replaceState({flickr:r},""),!0):(e.Flog.warn("[flickr-view] ["+this.name+"] Failed attempt to store history data for key: "+t),!1)},getViewDataFromHistory:function(e){return typeof history!="undefined"&&typeof history.state!="undefined"&&history.state!==null&&typeof history.state.flickr!="undefined"&&typeof history.state.flickr[this.name]!="undefined"&&typeof history.state.flickr[this.name][e]!="undefined"?history.state.flickr[this.name][e]:undefined},getTrackingSegments:function(){return{}},destroy:function(t){this.set("destroyed"
,!0);var n=this.get("container");return this.detachRegisteredEvents(),e.Node&&n&&(n.detach&&n.detach(),t&&(t.remove||t["delete"])&&n.remove&&n.remove(!0),this.set("container",null)),this.destroySubviews(),e.FlickrView.superclass.destroy.call(this)},beforeDestroy:function(){var e=this;Object.keys(this.subviews||{}).forEach(function(t,n,r){e.subviews[t].beforeDestroy()})},destroySubviews:function(){var e=this;Object.keys(this.subviews||{}).forEach(function(t,n,r){e.subviews[t].destroy()})},bringIntoFocus:function(){var e=this.get("container"),t=e.getAttribute("tabindex")||null;e.setAttribute("tabindex","-1"),e.focus(),e.blur(),t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},spaceid:{value:792600503,validator:function(t){return e.Lang.isNumber(t)||e.Lang.isString(t)},setter:function(e){return parseInt(e,10)}},trackedElementIDs:{value:[],validator:function(t){return e.Lang.isArray(t)}},rapidConf:{value:{},validator:function(t){return e.Lang.isObject(t)}},rapidKeys:{value:{},validator:function(t){return e.Lang.isObject(t)}},isActiveViewAgnostic:{value:!1}},create:n}),e.mix(e.FlickrView.prototype,e.Localizable)},"@VERSION@",{requires:["base","base-css","pure-css","template-base","flickr-promise","handlebars-base","handlebars-helpers","localizable"]});
YUI.add("hermes-template-photo-page-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["sub-photo-view"],u):a.call(t,"outlet",t["sub-photo-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["footer-full-view"],u):a.call(t,"outlet",t["footer-full-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["curator-photo-tools-view"],u):a.call(t,"outlet",t["curator-photo-tools-view"],u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-page-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.16.0",{requires:["base-base"]});
YUI.add("ttfp-recorder-plugin",function(e,t){"use strict";function r(e){r.superclass.constructor.apply(this,arguments)}var n="time_to_first_photo";r.NAME=r.NS="TTFPRecorderPlugin",r.ATTRS={selector:{value:""}},e.extend(r,e.Plugin.Base,{initializer:function(e){this.set("selector",e.selector),this.afterHostMethod("setContainerHTML",this._doAfterSetContainerHTML,this)},destructor:function(){},setSelector:function(e){this.set("selector",e)},testImageResolver:function(e){return function(t,r){var i=new Image;i.onload=function(){e.inDoc()||t(),i.onloadFired&&t(),i.onloadFired=!0,t(n)},i.onerror=function(){r("Failed to load image")},i.src=e.getAttribute("src"),i.complete&&(i.onloadFired=!0,t(n))}},_doAfterSetContainerHTML:function(){var e,t,n,r;r=this.get("host"),e=r.get("container"),r&&r.appContext&&r.appContext.clientMetrics&&e&&(t=e.one(this.get("selector")),n=r.appContext.clientMetrics,t&&(n.setPendingMark(this.testImageResolver(t)),n.beaconLater()))}}),e.namespace("Plugin.FlickrView").TTFPRecorderPlugin=r},"@VERSION@",{requires:["plugin"]});
YUI.add("signin-helper",function(e){function t(t,n){e.FlickrStorage.store(t,n)}function n(e,n){var r="fave";t(r,e),a(r,n)}function r(e,t){var n="comment";a(n,t)}function i(e,n){var r="share";t(r,e),a(r,n)}function s(t){var n,r,i=[];if(!t)return;if(e.FlickrStorage.hasEntries()){n=e.FlickrStorage.retrieve();for(r in n)o(t,n[r])||i.push(n[r])}return e.FlickrStorage.remove(),i}function o(e,t){var n=t.key,r=t.value;switch(n){case"fave":return u(e,r),!0;case"share":return!1}}function u(e,t){var n=t.id,r=e.getModelRegistry("photo-engagement-models");r.then(function(e){var t=e.proxy(n);t.registry.addAsFave(n)&&t.remoteUpdate()})}function a(t,n){if(n&&n.withPopup)var r=e.config.win.open(f(n),"_blank","height=650,resizable=1,scrollbars=1,location=yes"),i=setInterval(function(){r.closed&&(clearInterval(i),window.location.reload())},1e3);else e.config.win.location=f(n)}function f(t){t=t||{},t.closeWhenDone&&(t.postLoginUrl=e.url("/photo_grease_postlogin.gne",{protocol:!1}));var n=t.postLoginUrl||e.config.win.location.href,r=t.url||e.url("/signin/yahoo/",{protocol:!1});return r+"?redir="+encodeURIComponent(n)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(t,n){try{var r=[];e.StorageHelper.hasEntries(this._storageKey)&&(r=this.retrieve()),r.push({key:t,value:n}),e.StorageHelper.setItem(this._storageKey,JSON.stringify(r))}catch(i){}},retrieve:function(){var t={};try{t=JSON.parse(e.StorageHelper.getItem(this._storageKey))}catch(n){}return t},remove:function(){try{e.StorageHelper.remove(this._storageKey)}catch(t){}},hasEntries:function(){return e.StorageHelper.hasEntries(this._storageKey)}},e.SigninHelper={savePreLoginAction:t,addPendingFave:n,addPendingComment:r,addPendingShare:i,checkPendingQueue:s,_redirectToSignin:a,_getSigninUrl:f}},"@VERSION@",{requires:["url","storage-helper"]});
YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,i={transitionTimeout:2e3},s={getPrefixedStyleProperty:{}},o={};t=e.flutil={xbrowser:{transition:function(){var e,t,i,s;e={cssPropName:null,transitionendEventName:null};if(!r)return e;t=[["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"],["MSTransition","msTransitionEnd"],["transition","transitionEnd"]];if(n.getComputedStyle){s=n.getComputedStyle(r.createElement("div"));while(t.length){i=t.shift();if(s&&s[i[0]]!==undefined)return e.cssPropName=i[0],e.transitionendEventName=i[1],e}}return e}()},setStylePrefixed:function(t,n,r){var i=this.getPrefixedStyleProperty(t);return e.Array.each(i,function(e){r.setStyle(e,n)}),r},getPrefixedStyleProperty:function(t){if(s.getPrefixedStyleProperty[t])return s.getPrefixedStyleProperty[t];var n=[],r=["-webkit-","-moz-","-ms-",""];return e.Array.each(r,function(e){n.push(e+t)}),s.getPrefixedStyleProperty[t]=n,n},getLogger:function(t){return t?e.Flog:{log:function(){}}},dump:function(){var e=[].slice.call(arguments),t=typeof e[0]=="string"?e.shift():"LOG";e.unshift("color: #FC0"),e.unshift("%c["+t+"]"),console.log.apply(console,e)},perf:function(e){var t={};try{e.now()}catch(n){e={now:function(){return(new Date).getTime()}}}return{start:function(n){t[n||"perf"]=e.now()},stop:function(n){var r=e.now()-t[n||"perf"];n||(n="perf"),delete t[n],console.log(n,(r*1e3|0)/1e3,"ms")}}}(typeof window=="undefined"?{}:window.performance),extend:function(e){return e||(e={}),Array.prototype.slice.call(arguments,1).forEach(function(t){if(!t)return;for(var n in t)e[n]=t[n]}),e},objectCreate:function(e,n){var r,i;return r=function(){},r.prototype=e,i=new r,n?t.extend(i,n):i},throttle:function(e,t){var n=function(){if(n._t){n._q=!0;return}n._t=setTimeout(function(){n._t=null,n._q&&n(),n._q=null},t),e()};return n},result:function(t){return e.Lang.isFunction(t)?t():t},onTransitionEnd:function(e,r){if(!r||typeof r!="function")return;var s,o,u;e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.cssPropName];if(!u||u.match(/none/))return r();o=function(){clearTimeout(s),e.removeEventListener(t.xbrowser.transition.transitionendEventName,o),r()},s=setTimeout(o,i.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionendEventName,o)},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},setCookie:function(t){if(!t.cookieName||typeof t.cookieValue=="undefined"||!t.path)throw new Error("[flutil.setCookie] Missing important parameters to set a cookie");var n=t.cookieName,r=t.cookieValue,i=t.domain||".flickr.com",s=t.path,o=t.expiresMonthsFromNow||3,u=e.Lang.isNumber(t.expires)?t.expires:e.moment().add("months",o).toDate();t.remove&&e.Cookie.remove(n,{path:s}),e.Cookie.set(n,r,{domain:i,path:s,expires:u})},createFragment:function(e){var t=r.createElement("div"),n=r.createDocumentFragment(),i;t.innerHTML=e;while(i=t.firstChild)n.appendChild(i);return n},constrainToValues:function(e,t){return t.indexOf(e)<0?t[0]:e},escapeInput:function(e,t){var n;if(!r)return e;if(!e&&typeof e!="number")return"";t||(t="text");if(t==="html")return n=r.createElement("div"),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="text")return n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/ig," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="numericstring")return(e+"").replace(/[^\d]/,"")},disableEvent:function(n,r){r=e.merge({excepted:":not(*)",onDisabledEvent:null},r);if(!document.body.addEventListener)return;o[n]=o[n]||{},o[n][r.excepted]&&t.enableEvent(n,r.excepted),o[n][r.excepted]=function(t){if(!r.excepted||!e.one(t.target).ancestors(r.excepted,!0).isEmpty())return;t.preventDefault(),t.stopPropagation(),r.onDisabledEvent&&r.onDisabledEvent(t)},document.body.addEventListener(n,o[n][r.excepted],!0)},enableEvent:function(t,n){n=e.merge({excepted:":not(*)"},n);if(!o[t]||!o[t][n.excepted])return;document.body.removeEventListener(t,o[t][n.excepted],!0),o[t][n.excepted]=null},unescape:function(t){if(!t||!e.Lang.isString(t))return t;var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#39;":"'","&#92;":"\\"};return t.replace(/(&amp;|&lt;|&gt;|&quot;|&#x27;|&#39;|&#92;)/ig,function(e){return n[e.toLowerCase()]})},getTemplate:function(t){var n=null,r;return r=e.Template.get("hermes/"+t),r?n=r:e.Flog.error("Could not find template",t),n},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r=n.split(/=/),i;return i=r[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t),i!==undefined&&i!==null?i+"":r[1]||""}).trim()},createHashCode:function(e){var t,n="0000000000";return typeof e!="object"?t=e+"":t=Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(r){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0).toString().replace(/^-/,""),n.slice(0,-1*t.length)+t},camelCaseifyKeys:function(e){return Object.keys(e).reduce(function(n,r){return n[t.camelCaseify(r)]=e[r],n},{})},camelCaseify:function(e){return e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})},unCamelCaseify:function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^-/,"")},unicodeVariants:["(?:ae|\u00e6)","(?:oe|\u0153)","(?:ss|\u00df)","(?:th|\u00de)","[a\u00e1\u00e0\u00e2\u00e4\u00e3a\u00e5\u1ea5]","[e\u00e9\u00e8\u00ea\u00eb\u011b3]","[i\u00ed\u00ec\u00ee\u00ef\u01d0]","[o\u00f3\u00f2\u00f4\u00f6\u00f5\u01d2\u1ecf\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\u00f8]","[u\u00fa\u00f9\u00fb\u00fc\u01d4\u01da\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1]","[y\u00fd\u00ff]","[c\u00e7\u010d]","[d\u00d0]","[f\u0192]","[g\u01e7]","[h\u021f]","[j\u01f0]","[k\u01e9]","[l\u013e]","[n\u00f1\u0148]","[r\u0159\u00ae]","[s\u0161\u1e67]","[t\u0165]","[z\u017e]"],agnosticizeUnicode:function(e){var t=this.unicodeVariants,n=t.length,r;for(r=0;r<n;r++)e=e.replace(new RegExp(t[r],"gi"),t[r]);return e},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}
).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},openPopupWindow:function(t,n){var r,i,s,o,u,a;if(typeof window=="undefined")return;i=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),s=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0),s.top||(s.top=(i.screen.height-s.height)/2|0),s.left||(s.left=(i.screen.width-s.width)/2|0),r=Object.keys(s).map(function(e){var t=s[e];return typeof t=="boolean"&&(t=t?"yes":"no"),e+"="+t}).join(","),i=i.open(t,n.name,r),i.focus();if(n.onUrlChange||n.onClose)o="_start_",a=setInterval(function(){if(!i.location){clearInterval(a),n.onClose&&n.onClose();return}try{u=i.location.href||"x-origin"}catch(t){i.postMessage("",e.url())}if(u===o)return;o=u,n.onUrlChange&&n.onUrlChange(u)},1e3);return i},parseYYYYMMDDDatestamp:function(t){return!e.Lang.isString(t)||t.length!==8?null:Date.parse(t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2))},trimArray:function(e,t){var n,r=e.length;t&&(e=e.concat());if(!e[0]){n=0;while(n<r&&!e[n++]);n===r?e=[]:e=e.slice(n-1)}n=e.length;if(!e[n]){while(n>0&&!e[--n]);e=e.slice(0,n+1)}return e},photoCoords:{normalize:function(e,t,n,r){return{x:e/500,y:t/375,w:n/500,h:r/375}},denormalize:function(e){return{x:e.x*500,y:e.y*375,w:e.w*500,h:e.h*375}},denormX:function(e){return e.x*500},denormY:function(e){return e.y*375},denormW:function(e){return e.w*500},denormH:function(e){return e.h*375}}}},"@VERSION@",{requires:["url"],optional:[]});
YUI.add("hermes-template-dialog-tooltip",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" ui-dialog-tooltip-witharrow"}function h(e,t){return" drop-up"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-tooltip',o=n["if"].call(t,t.arrow,{hash:{},inverse:a.noop,fn:a.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.dropUp,{hash:{},inverse:a.noop,fn:a.program(3,h,i),data:i});if(o||o===0)s+=o;return s+='" data-action="halt">\n	<span class="ui-dialog-arrow"></span>\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):f.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-tooltip",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-modal">\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):a.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-alert",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-alert">\n    <div class="dialog-title">\n		<h3>'+f((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+'</h3>\n		<i class="close-alert ui-dialog-button-close" data-action="dismiss"></i>\n    </div>\n    <div class="dialog-content">\n        <i class="ui-icon-modal-error '+f((o=(o=t.attrs,o==null||o===!1?o:o.level),typeof o===a?o.apply(t):o))+'"></i>\n        <div class="alert-dialog-text">\n    	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):l.call(t,"dialogOutlet",t.content,u)))+'\n    	</div>\n    </div>\n    <button class="ui-button ui-button-cta" data-action="ok">\n        <span>'+f((o=(o=t.attrs,o==null||o===!1?o:o.confirmLabel),typeof o===a?o.apply(t):o))+"</span>\n    </button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-alert",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-cta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return"ui-buttonbar-vertical"}function d(e,t){var n="",r;return n+='\n				<button class="ui-button ui-button-cta" data-action="confirm"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.confirmButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}function v(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.buttonMarkup,{hash:{},inverse:c.program(8,g,t),fn:c.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var n="",r;return n+="\n					"+l((r=e.buttonMarkup,typeof r===f?r.apply(e):r))+"\n				",n}function g(e,t){var r="",i;r+='\n					<button class="ui-button" ',i=n["if"].call(e,e.buttonAction,{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(i||i===0)r+=i;return r+="><span>"+l((i=e.buttonLabel,typeof i===f?i.apply(e):i))+"</span></button>\n				",r}function y(e,t){var n="",r;return n+='data-action="'+l((r=e.buttonAction,typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+='\n				<button class="ui-button" data-action="decline"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.cancelButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-cta">\n	<h1 class="ui-dialog-title">'+l((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===f?o.apply(t):o))+'</h1>\n	<div class="ui-dialog-body">\n		<div class="ui-util-paragraph">\n			',a={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,a):h.call(t,"dialogOutlet",t.content,a)))+'\n		</div>\n		<div class="ui-buttonbar ',u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.verticalButtonList),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n.unless.call(t,(o=t.attrs,o==null||o===!1?o:o.hideConfirmButton),{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n.each.call(t,(o=t.attrs,o==null||o===!1?o:o.additionalButtons),{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.useCancelButton),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-cta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("dialog",function(e){"use strict";var t,n,r={},i=e.config.win,s=e.config.doc;t={css:{state:"c-state-{{state}}",hidden:"ui-util-hidden",loading:"ui-util-loading",working:"ui-util-working",locked:"ui-util-locked",complete:"ui-util-complete",removed:"ui-util-removed",content:"js-content",wrapper:"ui-dialog-wrapper",anchorSelected:"ui-util-selected",curtain:"ui-dialog-modal-curtain",curtainClear:"ui-dialog-modal-curtain-clear",arrow:"ui-dialog-arrow"},transitionTimeout:2e3,debug:!1},n=e.merge(e.flutil,{log:function(){if(!t.debug||!console.log.apply)return;var e=[].slice.call(arguments);e.unshift("DIALOG"),n.dump.apply(null,e)},propagateWrapperAttributes:function(e,n){var r=[],i;return n?(Array.prototype.slice.call(n.getDOMNode().classList).forEach(function(i){if(i===t.css.wrapper)return;n.removeClass(i),e.addClass(i),r.push(i)}),i=n.getAttribute("data-action"),i&&(n.removeAttribute("data-action"),r.push({attr:"data-action",restore:e.getAttribute("data-action")||null}),e.setAttribute("data-action",i)),r):r},rollbackWrapperAttributes:function(e,t){if(!t)return;for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"?t[1].restore?e.setAttribute(t[n].name,t[n].restore):e.removeAttribute(t[n].name):e.removeClass(t[n])}}),e.namespace("Views").dialog={_dialogs:{},getInstance:function(t,r){var i,s,o;return r.id?s={id:r.id}:(s=e.merge(r),delete s.parent,delete s.rootEl,delete s.template,delete s.appContext,typeof s.content=="object"&&s.content instanceof e.FlickrView?s.content=s.content.get("container").toString():typeof s.content=="function"?s.content=s.content({}):s.content.toString()),i="SGL"+n.createHashCode(s),o=this._dialogs[t+":"+i],o?o:this._new(t,i,r)},getNewInstance:function(e,t){var n="OBJ"+(Object.keys(this._dialogs).length+1)+(new Date).getTime();return this._new(e,n,t)},_new:function(t,n,i){var s,o,u,a,f;if(e.Env.isServer)throw new Error("Dialogs are client-only!");i=e.mix(i||{});if(i.parent)o=i.parent,delete i.parent,a=o.getContainer({subviewName:t,subviewParams:i}),u=o.appContext;else{if(!i.appContext)throw new Error('Either the "appContext" or "parent" parameter is required!');o=null,u=i.appContext,a=e.Node.create("<div/>"),a.addClass("view").addClass(t)}return i.appContext=u,i.container=a,s=new r[t](i),f=t+(n?":"+n:""),this.registerView(s,f),this._navigateCloseHook||(this._navigateCloseHook=u.flapp.on("navigate",this.close.bind(this))),s},registerView:function(e,t){var n=this;t=t||"REG"+(Object.keys(this._dialogs).length+1),e.manager=this,this._dialogs[t]=e,e.on("destroy",function(){delete n._dialogs[t]})},hide:function(e){this.close(e,"hide")},close:function(e,t){var n=this,r;t=t||"close",typeof e=="string"?r=function(r){if(e!==r.split(/:/)[0])return;n._dialogs[r][t]()}:typeof e=="object"?r=function(r){if(e===n._dialogs[r])return;n._dialogs[r][t]()}:r=function(e){n._dialogs[e].get("autoCloseable")&&n._dialogs[e][t]()},Object.keys(this._dialogs).forEach(r)},isOpen:function(e){},util:n},e.namespace("Views").dialogs=r,r["dialog-base"]=e.Base.create("dialog-base",e.FlickrView,[],{initializer:function(e){return e=e||{},this.state={},this.manager=null,this.appContext=this.appContext||e.appContext,this},render:function(){var n=this.templates(this.get("template"))(this.toJSON());return this.setContainerHTML(n),e.namespace("Views").dialog.util.propagateWrapperAttributes(this.get("container"),this.get("container").one("."+t.css.wrapper)),this.renderContent(),this.activate(),this.get("container").addClass(t.css.hidden),this.anchorToLayout(),this.state.visible=!0,this.hide(),this.state.rendered=!0,this.fire("rendered"),this},renderContent:function(r){var i=this.get("content"),s=this.get("container"),o=s.one("."+t.css.content);e.namespace("Views").dialog.util.rollbackWrapperAttributes(this.get("container"),this._contWrap);if(i instanceof e.FlickrView){i=i.get("container");if(!i)throw new Error("The Content View doesn't have a container");o.setHTML(""),o.appendChild(i)}else i instanceof e.Node?(o.setHTML(""),o.appendChild(i)):typeof i=="function"?(i=i(e.merge(this.toJSON(),r)),o.setHTML(i)):typeof i=="string"&&this.state.rendered&&o.setHTML(i);this._contWrap=n.propagateWrapperAttributes(s,o.one("."+t.css.wrapper))},renderCurtain:function(){var n=this,r,i=e.Number.parse(this.get("tintCurtain"));this.get("curtain")||(r=e.Node.create("<div/>"),r.addClass(t.css.curtain).addClass(t.css.hidden),this.get("visibleShim")||r.addClass(t.css.curtainClear),r.on("click",this.dismiss,this),i&&r.setStyle("backgroundColor","rgba(0, 0, 0, "+i+")"),this.set("curtain",r),this.get("appendCurtainTo")?this.get("appendCurtainTo").appendChild(r):this.get("container").ancestor()&&this.get("container").ancestor().insert(r,"after")),n.get("curtain").removeClass(t.css.hidden)},anchorToLayout:function(){var e=this.get("container"),t=this.get("anchorTo"),n;(this.get("appendTo")||t||this.get("rootEl")).appendChild(e),this.get("positioning")?(this.get("dropUp")&&(n="bottomright"),this.refreshPosition(n)):this.manualPosition()},refreshPosition:function(n){var r,s,o,u,a,f,l,c,h=this.get("container"),p=this.get("anchorTo"),d=this.get("offsetLeft")||0,v,m;u=h.getDOMNode().getBoundingClientRect(),this.set("width",h.getComputedStyle("width")),this.set("height",h.getComputedStyle("height")),h.getComputedStyle("position")==="fixed"&&h.setStyles({marginLeft:(-1*u.width/2|0)-d+"px",marginTop:(-1*u.height/2|0)+"px"});if(p){r=p.getDOMNode().getBoundingClientRect(),this.set("anchorWidth",r.width),this.set("anchorHeight",r.height),m=e.merge({top:0,bottom:0,left:0,right:0},this.get("constraints")),c={top:m.top,bottom:i.innerHeight+m.bottom,left:m.left,right:i.innerWidth+m.right},a=[[r.bottom+u.height<c.bottom&&r.right+u.width<c.right,{left:0,top:r.height},"topleft"],[r.bottom+u.height<c.bottom&&r.left-u.width>c.left,{right:0,top:r.height},"topright"],[r.top>u.height+c.top&&r.right+u.width<c.right,{left:0,bottom:r.height},"bottomleft"],[r.top>u.height+c.top&&r.left-u.width>c.left,{right:0,bottom:r.height},"bottomright"],[!0,{left:Math.round
(-1*(u.width-r.width)/2),top:r.height},"topcenter"]],n&&(n=n.toLowerCase(),a=a.filter(function(e){return e[2]===n?(e[0]=!0,!0):!1})||a);while(a.length){l=a.shift();if(l[0]){f=l[1],h.addClass("ui-dialog-tooltip-witharrow-"+l[2]),h.setStyles(e.mix({top:"auto",bottom:"auto",left:"auto",right:"auto"},f,!0));break}}v=h.one("."+t.css.arrow),v&&(s=20,f.left!==0&&f.right!==0?o=Math.round((u.width-s)/2)+"px":o=Math.round((r.width-s)/2)+"px",v.setStyles({right:f.right===undefined?"auto":o,left:f.left===undefined?"auto":o}))}},manualPosition:function(){if(this.get("arrow")){var e=typeof this.get("arrow")=="string"?this.get("arrow"):"topleft";this.get("container").addClass("ui-dialog-tooltip-witharrow-"+e)}},activate:function(){var e={":confirm":this.confirm,":decline":this.decline,":dismiss":this.dismiss,":ok":this.dismiss,":halt":function(e){e.halt()}};return this.attachEvents(e),this},toJSON:function(){var t=this.getAttrs();return Object.keys(t).reduce(function(n,r){var i=t[r];return i instanceof e.Node?n:i instanceof e.FlickrView?n:(i&&i.toJSON&&(i=i.toJSON()),n[r]=i,n)},{})},isVisible:function(){return!!this.state.visible},isLocked:function(){return!!this.state.locked},isWorking:function(){return!!this.state.working},show:function(r){var i=this,s=this.get("container"),o=this.get("anchorTo");this.set("dismissing",!1),this.switchToLoading(!1);if(this.state.visible)return;this.state.rendered||this.render(),i.state.visible=!0,s.addClass(this.get("dialogClass")),this.fire("show"),s.removeClass(t.css.removed),setTimeout(function(){n.onTransitionEnd(s,r),s.removeClass(t.css.hidden),o&&o.addClass(t.css.anchorSelected)},10),e.fire("flickr:setKeyEventScope",this.getKeyEventScope())},handleError:function(e){return function(t){console.error(e,!t.toString||t.toString().match(/^\[object/)?t:t.toString())}},getKeyEventScope:function(){return this.name+this._yuid},close:function(e){if(this._destroyed)return;var t=this;this.set("dismissing",!1),this.fire("close"),this.hide(function(){t.destructor(),e&&e()})},destructor:function(){var t=this.get("container");t.detach(),t.remove(),this.set("container",null),this.set("content",null),this.set("appendTo",null),this.set("anchorTo",null),this.set("rootEl",null),this.set("dialogClass",null),this.manager=null,e.FlickrView.prototype.destroy.call(this),this._destroyed=!0,this.fire("destroy"),this.detachAll()},hide:function(r){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());if(!this.state.visible)return;var i=this,s=this.get("container"),o=this.get("anchorTo"),u=this.get("curtain"),a=!this.state.rendered;this.state.visible=!1,o&&o.removeClass(t.css.anchorSelected),u?(this.set("curtain",null),u.detach(),n.onTransitionEnd(u,function(){u.remove()}),u.addClass(t.css.hidden)):s.addClass(t.css.removed),e.namespace("Views").dialog.util.onTransitionEnd(s,function(){i.set("dismissing",!1),a||i.fire("hide"),i.state.visible||s.addClass(t.css.removed),r&&r()}),s.addClass(t.css.hidden)},toggle:function(e){this[this.state.visible?"hide":"show"](e),this.fire("toggle",this.state.visible)},switchToLoading:function(e){this.switchToUIState("loading",e)},switchToComplete:function(e){this.switchToUIState("complete",e)},switchToLocked:function(e){this.switchToUIState("locked",e)},switchToWorking:function(e){this.switchToUIState("working",e)},switchToUIState:function(e,n){var r;n=n===!1?!1:!0;if(this.state[e]===n)return;n&&this.show(),this.state[e]=n,r=t.css[e]||t.css.state.replace(/\{\{state\}\}/,e),this.get("container")[n?"addClass":"removeClass"](r)},confirm:function(t,n){t.halt(),this.fire("confirm",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("CONFIRM")},decline:function(t,n){t.halt(),this.fire("decline",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("DECLINE")},dismiss:function(t,n){if(this.isWorking()||!this.get("hideOnCurtainClick"))if(t.target===this.get("curtain"))return;this.set("dismissing",!0),t.halt(),this.fire("dismiss",n),this.hide(),e.namespace("Views").dialog.util.log("DISMISS")}},{ATTRS:{template:{value:"dialog"},anchorTo:{value:null},offsetLeft:{value:0},appendTo:{value:null},appendCurtainTo:{value:null},hideOnCurtainClick:{value:!0},tintCurtain:{value:0},rootEl:{value:e.Node&&e.one(s&&s.body)},content:{value:null},attrs:{value:{}},stack:{value:!1},hideOnButtonClick:{value:!0},visibleShim:{value:!0},positioning:{value:!0},arrow:{value:!1},dropUp:{value:!1},constraints:{value:{}},dialogClass:{value:""},autoCloseable:{value:!0}}}),r["dialog-tooltip"]=e.Base.create("dialog-tooltip",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager&&this.manager.close&&this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-tooltip"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-modal"]=e.Base.create("dialog-modal",r["dialog-base"],[],{anchorToLayout:function(){this.set("anchorTo",null),r["dialog-base"].prototype.anchorToLayout.apply(this,arguments)},show:function(e,t){var n=t||{},i=n.hideOthers||!1;i?this.get("stack")||this.manager.hide(this):this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.call(this,e),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-modal"}}}),r["dialog-alert"]=e.Base.create("dialog-alert",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-alert"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-cta"]=e.Base.create("dialog-cta",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()},hide:function(){this.get("curtain")&&(this.get("curtain").remove(),this.set("curtain",null)),r["dialog-base"].prototype.hide.apply(this,arguments)}},{ATTRS:{template:{value:"dialog-cta"},offsetLeft:{value:0},visibleShim:{value:!1}}}
),r["dialog-progress"]=e.Base.create("dialog-progress",r["dialog-base"],[],{},{ATTRS:{template:{value:"dialog-progress"}}}),e.Handlebars.registerHelper("dialogOutlet",function(n){var r=['<div class="'+t.css.content+'">'];return n instanceof e.FlickrView||n instanceof e.Node?r.push("<!--"+(n.name||"DOM-node")+"-->"):r.push((n||"")+""),r.push("</div>"),new e.Handlebars.SafeString(r.join(""))})},"@VERSION@",{requires:["flickr-view","handlebars-base","flutil","hermes-template-dialog-tooltip","hermes-template-dialog-modal","hermes-template-dialog-alert","hermes-template-dialog-cta","flickrui-css"]});
YUI.add("overflow-helper",function(e){function t(t){var n=0,r;return YUI.Env.isServer||(r=e.Node.create("<div></div>"),r.setStyle("width",100).setStyle("height",100).setStyle("overflow","scroll").setStyle("position","absolute").setStyle("top",-9999),t.append(r),n=r._node.offsetWidth-r._node.clientWidth,r.remove(!0)),n}function n(t,n){var r,i,s;YUI.Env.isServer||(r=e.Node.create("<div>test event</div>"),r.setStyle("height: 1px").setStyle("width","1px").setStyle("opacity",0).setStyle("position","absolute").setStyle("top",-99999).setStyle("left",-99999).setStyle("overflow","auto"),t.append(r),i=setTimeout(function(){r._node.removeEventListener("overflow",s),r.remove(!0),n(!1)},10),s=function(e){clearTimeout(i),r._node.removeEventListener("overflow",s),r.remove(!0),n(!0)},r._node.addEventListener("overflow",s,!1))}function r(e,t,r,i){var s=t==="over",o,u,a,f;"OverflowEvent"in window?(f=function(e){if(e.type===t+"flow"||e.orient===0&&e.horizontalOverflow===s||e.orient===1&&e.verticalOverflow===s||e.orient===2&&e.horizontalOverflow===s&&e.verticalOverflow===s)return r.call(this,e)},a=e._node.addEventListener("overflowchanged",f,!1),i({detach:function(){e._node.removeEventListener("overflowchanged",f)}})):n(e,function(n){n?(f=function(e){if(e.type===t+"flow"||e.orient===0&&e.horizontalOverflow===s||e.orient===1&&e.verticalOverflow===s||e.orient===2&&e.horizontalOverflow===s&&e.verticalOverflow===s)return r.call(this,e)},a=e._node.addEventListener(t+"flow",f,!1),i({detach:function(){e._node.removeEventListener(t+"flow",f)}})):(u=function(){e._node.scrollHeight>e._node.clientHeight?t==="over"&&r.call(e._node,{}):t==="under"&&r.call(e._node,{})},"MutationObserver"in window?(o=new MutationObserver(function(e){e.some(function(e){return u(),!0})}),o.observe(e._node,{attributes:!1,subtree:!0,childList:!0}),i({detach:function(){o.disconnect()}})):"MutationEvent"in window&&(f=function(e){setTimeout(function(){u()},10)},a=e._node.addEventListener("DOMSubtreeModified",f,!1),i({detach:function(){e._node.removeEventListener("DOMSubtreeModified",f)}})))})}e.OverflowHelper={detectScrollbarSize:t,addFlowListener:r}},"@VERSION@",{requires:[]});
YUI.add("hermes-template-error-500",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return'\n<html lang="en-us">\n<head>\n	<title>Flickr - Photo Sharing!</title>\n	<meta charset="utf-8">\n	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n'}function c(e,t){return'\n</head>\n\n<body>\n	<div id="main">\n'}function h(e,t){var r="",i;return r+="\n				<span><b>Error</b>: ",(i=n.message)?i=i.call(e,{hash:{},data:t}):(i=e.message,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>\n			",r}function p(e,t){var r="",i;return r+="\n				<span><b>Source</b>: ",(i=n.source)?i=i.call(e,{hash:{},data:t}):(i=e.source,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>\n			",r}function d(e,t){var r="",i;return r+="\n				<span>",(i=n.requestID)?i=i.call(e,{hash:{},data:t}):(i=e.requestID,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>\n			",r}function v(e,t){var r="",i;return r+="\n				<span><b>Environment:</b> ",(i=n.environment)?i=i.call(e,{hash:{},data:t}):(i=e.environment,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>\n			",r}function m(e,t){return"\n	</div>\n</body>\n</html>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t.includeWrapperMarkup,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n	<style>\n		\n		header {\n			display: block;\n			position: absolute;\n			top: 0;\n			left: 0;\n			right: 0;\n			height: 50px;\n			background: -moz-linear-gradient(top, rgba(0,0,0,0.87) 0%, rgba(79,79,79,1) 99%); /* FF3.6+ */\n			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0, 0.87)), color-stop(99%, rgba(79,79,79, 1))); /* Chrome, Safari4+ */\n			background: -webkit-linear-gradient(top, rgba(0,0,0, 0.87) 0%, rgba(79,79,79, 1) 99%); /* Chrome10+, Safari5.1+ */\n			background: -o-linear-gradient(top, rgba(0,0,0, 0.87) 0%, rgba(79,79,79, 1) 99%); /* Opera 11.10+ */\n			background: -ms-linear-gradient(top, rgba(0,0,0, 0.87) 0%, rgba(79,79,79, 1) 99%); /* IE10+ */\n			background: linear-gradient(to bottom, rgba(0,0,0, 0.87) 0%, rgba(79,79,79, 1) 99%); /* W3C */\n			filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#de000000', endColorstr='#4f4f4f', GradientType=0 ); /* IE6-9 */\n		}\n		\n		#header-logo {\n			text-indent: -9999px;\n			display: block;\n			position: absolute;\n			left: 0;\n			height: 51px;\n			width: 96px;\n			background-position: center center;\n			background-image: url(https://s.yimg.com/uy/build/images/flickr_logo_small_white.png);\n			background-image: -webkit-image-set(url(https://s.yimg.com/uy/build/images/flickr_logo_small_white.png) 1x, url(https://s.yimg.com/uy/build/images/flickr_logo_large_white.png) 2x);\n			background-repeat: no-repeat;\n		}\n		\n		#header-logout {\n			color: white;\n			position: absolute;\n			top: 0;\n			right: 0;\n			height: 50px;\n			padding: 15px;\n			text-align: right;\n			cursor: pointer;\n			cursor: hand;\n			display: block;\n		}\n		\n		#header-logout a {\n			color: white;\n		}\n		\n		body {\n			margin: 0; padding: 0; \n			font-family: \"Helvetica Neue\", helvetica, arial, sans-serif; \n			font-weight: 300;\n			color: #000;\n			overflow: hidden;\n			height: 100vh;\n			width: 100vw;\n		}\n\n		#bg {\n			transition: width 2s;\n			min-width: 600px;\n			min-height: 445px;\n			height: 100vh;\n			width: 100vw;\n			background-size: cover;\n			background-color: white;\n			background-image: url('https://s.yimg.com/uy/build/images/Panda_XL.jpg');\n			background-repeat: no-repeat;\n			background-position: center center;\n		}\n\n		.content {\n			position: absolute;\n			top: 20vh;\n			width: 3%;\n			right: 3vw; \n			z-index: 1;\n			padding: 10px;\n			width: 44%;\n			width: 44vw;\n			min-width: 525px;\n		}\n\n		.content span {\n			display: block;\n			line-height: 1.6em;\n			font-size: 17px;\n		}\n		\n		.content h1 + span {\n			margin-bottom: 1em;\n		}\n\n		h1 {\n			margin: 0;\n			font-weight: 300;\n			font-size: 44px;\n			margin-bottom: 24px;\n		}\n\n		a.attribution {\n			position: absolute;\n			bottom: 0;\n			right: 10px;\n			background-color: #000;\n			background: rgba(0,0,0, 0.45);\n			font-size: 11px;\n			padding: 7px 13px;\n			color: #dfdfdf;\n		}\n		\n		@media all and (max-width: 1600px) {\n			#bg {\n				background-image: url('https://s.yimg.com/uy/build/images/Panda_XL.jpg');\n			}\n		}\n		\n		@media all and (max-width: 941px) {\n			h1 {\n				font-size: 1.5em;\n				margin-bottom: 5vw;\n			}\n			\n			.content {\n				top: 40px;\n				right: 15vw; \n				margin: 20px auto 0 auto; \n				width: auto;\n				min-width: 20px;\n			}\n		}\n		\n		@media all and (max-width: 667px) {\n			\n			#bg {\n				background-position: right bottom;\n			}\n		}\n		\n		</style>\n",o=n["if"].call(t,t.includeWrapperMarkup,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n	<header>\n		<span id="header-logo"></span>\n		<span id="header-logout"><a href="//',(o=n.host)?o=o.call(t,{hash:{},data:i}):(o=t.host,o=typeof o===u?o.apply(t):o),s+=a(o)+'/logout.gne">Sign out</a></span>\n	</header>\n	<div id="bg">\n		<a class="attribution" href="/photos/toyokazu/8644384737/">By Toyokazu</a>\n		<div class="content">	\n			<h1>Bad, bad panda!<br>\n			Come on. We want photos.</h1>\n			<span>We&rsquo;re aware of the problem and are fixing it. Thanks for your patience.</span>\n			',o=n["if"].call(t,t.message,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n["if"].call(t,t.source,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n["if"].call(t,t.requestID,{hash:{},inverse:f.noop,fn:f.program(9,d,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n["if"].call(t,t.environment,{hash:{},inverse:f.noop,fn:f.program(11,v,i),data:i});if(o||o===0)s+=o;s+="\n		</div>\n	</div>\n",o=n["if"].call(t,t.includeWrapperMarkup,{hash:{},inverse:f.noop,fn:f.program(13,m,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template
.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/error-500",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-keyboard-legend",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return'\n\n<div class="keyboard-shortcut-legend all-layout">\n	<ul class="keyboard-row">\n		<li class="key-size-0 key0">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">F</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Fave</span>\n		</li>\n		<li class="key-size-0 key1">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">C</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Comment</span>\n		</li>\n		<li class="key-size-0 key2">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">S</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Share</span>\n		</li>\n		<li class="key-size-0 key3">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">&lt;</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Prev</span>\n		</li>\n		<li class="key-size-0 key4">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">&gt;</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Next</span>\n		</li>\n		<li class="key-size-0 key5">\n			<span class="key-container">\n				<a href="#" class="key-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">esc</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Close</span>\n		</li>\n		<li class="key-size-0 key6">\n			<span class="key-container">\n				<a href="#" class="key-height half-height" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">?</span>\n						<span class="sub">/</span>\n					</span>\n				</a>\n			</span>\n			<span class="shortcut-label">Shortcut dialog</span>\n		</li>\n	</ul>\n</div>\n<div class="show-legend">\n	<a href="#" class="show-legend-link">More</a>\n</div>\n\n'}function d(e,t){var r="",i;r+='\n\n<div class="keyboard-shortcut-legend ',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===f?i.apply(e):i),r+=l(i)+'-layout">\n	<p class="keyboard-legend-title">Keyboard Shortcuts</p>\n	\n	',i=n.each.call(e,e.rows,{hash:{},inverse:c.noop,fn:c.program(4,v,t),data:t});if(i||i===0)r+=i;return r+="\n\n	\n</div>\n\n",r}function v(e,t){var r="",i;r+='\n	<ul class="keyboard-row">\n		',i=n.each.call(e,e.keys,{hash:{},inverse:c.noop,fn:c.program(5,m,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n	",r}function m(e,t){var r="",i;r+='\n		<li class="key-size-',i=n["if"].call(e,e.keySize,{hash:{},inverse:c.program(8,y,t),fn:c.program(6,g,t),data:t});if(i||i===0)r+=i;r+=" ",(i=n.keyId)?i=i.call(e,{hash:{},data:t}):(i=e.keyId,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n			',i=n["if"].call(e,e.label,{hash:{},inverse:c.program(15,S,t),fn:c.program(10,b,t),data:t});if(i||i===0)r+=i;return r+="\n		</li>\n		",r}function g(e,t){var r;return(r=n.keySize)?r=r.call(e,{hash:{},data:t}):(r=e.keySize,r=typeof r===f?r.apply(e):r),l(r)}function y(e,t){return"0"}function b(e,t){var r="",i;r+='\n			<span class="key-container highlight">\n				<a href="#" class="key-height ',i=n["if"].call(e,e.label2,{hash:{},inverse:c.noop,fn:c.program(11,w,t),data:t});if(i||i===0)r+=i;r+='" role="button" tabindex="-1">\n					<span class="key">\n						<span class="sub">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span>\n						",i=n["if"].call(e,e.label2,{hash:{},inverse:c.noop,fn:c.program(13,E,t),data:t});if(i||i===0)r+=i;return r+="\n					</span>\n				</a>\n			</span>\n			",r}function w(e,t){return"half-height"}function E(e,t){var r="",i;return r+='\n						<span class="sub">',(i=n.label2)?i=i.call(e,{hash:{},data:t}):(i=e.label2,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span>\n						",r}function S(e,t){return'\n			<span class="key-container"></span>\n			'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i),data:i},u=(o=n.ifCond||t.ifCond,o?o.call(t,t.type,"===","short",a):h.call(t,"ifCond",t.type,"===","short",a));if(u||u===0)s+=u;return s+="\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/keyboard-legend",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-html5-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'\n<div class="html5-balls">\n	<div class="blueball"></div>\n	<div class="pinkball"></div>\n</div>\n'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/html5-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-html4-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'\n<div class="html4-balls"></div>\n'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/html4-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("html5-balls",function(e){var t=!(e.UA.ie&&e.UA.ie<9),n;n=function(e){return t?"html5-balls":"html4-balls"},e.augment(n,e.Attribute),e.Balls=n},"@VERSION@",{requires:["base","html5-balls-css","hermes-template-html5-balls","hermes-template-html4-balls","handlebars-helpers","template-base"]});
YUI.add("keyboard-legend-view",function(e){var t={qwerty:[{keys:[{keyId:"key0",label:"esc"}]},{keys:[{keyId:"key1"},{keyId:"key2"},{keyId:"key3"},{keyId:"key4"},{keyId:"key5"},{keyId:"key6"},{keyId:"key7"},{keyId:"key8"},{keyId:"key9"},{keyId:"key10"},{keyId:"key11"},{keyId:"key12"},{keyId:"key13"},{keyId:"key14",keySize:1}]},{keys:[{keyId:"key15",keySize:1},{keyId:"key16"},{keyId:"key17"},{keyId:"key18",label:"E"},{keyId:"key19"},{keyId:"key20",label:"T"},{keyId:"key21"},{keyId:"key22"},{keyId:"key23"},{keyId:"key24"},{keyId:"key25",label:"P"},{keyId:"key26"},{keyId:"key27"},{keyId:"key28"}]},{keys:[{keyId:"key29",keySize:4},{keyId:"key30",label:"A"},{keyId:"key31",label:"S"},{keyId:"key32"},{keyId:"key33",label:"F"},{keyId:"key34",label:"G"},{keyId:"key35"},{keyId:"key36",label:"J"},{keyId:"key37",label:"K"},{keyId:"key38",label:"L"},{keyId:"key39"},{keyId:"key40"},{keyId:"key41",keySize:4}]},{keys:[{keyId:"key42",keySize:5},{keyId:"key43"},{keyId:"key44"},{keyId:"key45",label:"C"},{keyId:"key46"},{keyId:"key47"},{keyId:"key48"},{keyId:"key49"},{keyId:"key50",label:"<",label2:","},{keyId:"key51",label:">",label2:"."},{keyId:"key52",label:"?",label2:"/"},{keyId:"key53",keySize:5}]},{keys:[{keyId:"key54"},{keyId:"key55"},{keyId:"key56"},{keyId:"key57",keySize:6},{keyId:"key58",keySize:7},{keyId:"key59",keySize:6},{keyId:"key60"},{keyId:"key61",keySize:8,label:"<"},{keyId:"key62 row5-key-fix",keySize:9},{keyId:"key63",keySize:8},{keyId:"key64",keySize:8,label:">"}]}],nonqwerty:[{keys:[{keyId:"key0",label:"esc",keySize:10}]},{keys:[{keyId:"key1"},{keyId:"key2"},{keyId:"key3"},{keyId:"key4"},{keyId:"key5"},{keyId:"key6"},{keyId:"key7"},{keyId:"key8"},{keyId:"key9"},{keyId:"key10"},{keyId:"key11"},{keyId:"key12"},{keyId:"key13"},{keyId:"key14",keySize:1}]},{keys:[{keyId:"key15",keySize:1},{keyId:"key16"},{keyId:"key17"},{keyId:"key18",label:"E"},{keyId:"key19"},{keyId:"key20",label:"T"},{keyId:"key21"},{keyId:"key22"},{keyId:"key23"},{keyId:"key24"},{keyId:"key25",label:"P"},{keyId:"key26",label:"{",label2:"["},{keyId:"key27",label:"}",label2:"]"},{keyId:"key28 row2-key-fix-bottom"},{keyId:"row2-key-fix"}]},{keys:[{keyId:"key29",keySize:4},{keyId:"key30",label:"A"},{keyId:"key31",label:"S"},{keyId:"key32"},{keyId:"key33",label:"F"},{keyId:"key34",label:"G"},{keyId:"key35"},{keyId:"key36",label:"J"},{keyId:"key37",label:"K"},{keyId:"key38",label:"L"},{keyId:"key39"},{keyId:"key40"},{keyId:"key41"},{keyId:"key42 row3-key-fix-top",keySize:2},{keyId:"row3-key-fix"}]},{keys:[{keyId:"key43",keySize:3},{keyId:"key44"},{keyId:"key45"},{keyId:"key46"},{keyId:"key47",label:"C"},{keyId:"key48"},{keyId:"key49"},{keyId:"key50"},{keyId:"key51"},{keyId:"key52",label:"<",label2:","},{keyId:"key53",label:">",label2:"."},{keyId:"key54",label:"?",label2:"/"},{keyId:"key55",keySize:5}]},{keys:[{keyId:"key56"},{keyId:"key57"},{keyId:"key58"},{keyId:"key59",keySize:6},{keyId:"key60",keySize:7},{keyId:"key61",keySize:6},{keyId:"key62"},{keyId:"key63",keySize:8,label:"<"},{keyId:"key64 row5-key-fix",keySize:9},{keyId:"key65",keySize:8},{keyId:"key66",keySize:8,label:">"}]}]};e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(n){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(e.Balls()),this.layouts=t,this.advanced=!1,this.type="nonqwerty",this},buildContainer:function(){var e=this.templates("keyboard-legend")({type:this.advanced?this.type:"short",rows:this.layouts[this.type]});return this.setContainerHTML(e),this},dialogKeyPressed:function(){e.fire("flickr:photo-page:hideKeyboardLegend")},showAdvanced:function(){this.advanced=!0,this.buildContainer()},activate:function(){var e=this.get("container").one(".show-legend-link"),t=this;return this.attachKeyEvent("down:191",this.dialogKeyPressed.bind(this)),e&&this.registerEventHandler(e.on("click",function(e){e.preventDefault(),t.showAdvanced()})),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-keyboard-legend","keyboard-legend-css","html5-balls"]});
YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){return" html-modal"}function p(e,t){return" subview-modal"}function d(e,t){return'<div class="close-x"></div>'}function v(e,t){return" lines"}function m(e,t){var r="",i;return r+='\n			<div class="content text-only">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===a?i.apply(e):i),r+=f(i)+"\n			</div>\n		",r}function g(e,t){var r="",i,s;return r+='\n			<div class="content html-only">\n				',s={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):l.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function y(e,t){return'\n			<div class="content subview"></div>\n		'}function b(e,t){var r="",i,s;r+='\n		<div class="buttons">\n			',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.visible),{hash:{},inverse:c.noop,fn:c.program(16,w,t),data:t});if(s||s===0)r+=s;r+="\n			",s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.cancel),i==null||i===!1?i:i.visible),{hash:{},inverse:c.noop,fn:c.program(21,x,t),data:t});if(s||s===0)r+=s;r+="\n			",s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.flavorText),{hash:{},inverse:c.noop,fn:c.program(23,T,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n		",r}function w(e,t){var r="",i,s;r+='<button class="medium ',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.isDangerous),{hash:{},inverse:c.noop,fn:c.program(17,E,t),data:t});if(s||s===0)r+=s;r+=' action"',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.disabled),{hash:{},inverse:c.noop,fn:c.program(19,S,t),data:t});if(s||s===0)r+=s;return r+=">"+f((i=(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.label),typeof i===a?i.apply(e):i))+"</button>",r}function E(e,t){return"danger"}function S(e,t){return' disabled="disabled"'}function x(e,t){var n="",r;return n+='<button class="medium alt cancel">'+f((r=(r=(r=e.buttons,r==null||r===!1?r:r.cancel),r==null||r===!1?r:r.label),typeof r===a?r.apply(e):r))+"</button>",n}function T(e,t){var r="",i,s,o;r+='\n			<div class="flavor-text secondary',s=n.unless.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.visible),{hash:{},inverse:c.noop,fn:c.program(24,N,t),data:t});if(s||s===0)r+=s;return r+='">',o={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o):l.call(e,"renderTrustedMarkup",(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o)))+"</div>\n			",r}function N(e,t){return" hidden"}function C(e,t){return" modal-overlay-dark"}function k(e,t){return" invisible"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="modal',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n	',o=n["if"].call(t,t.showCancelX,{hash:{},inverse:c.noop,fn:c.program(5,d,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="head">\n		<div class="title">',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+'</div>\n		<div class="extra"></div>\n	</div>\n	<div class="body',o=n["if"].call(t,t.showBodyLines,{hash:{},inverse:c.noop,fn:c.program(7,v,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:c.noop,fn:c.program(9,m,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:c.noop,fn:c.program(11,g,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:c.noop,fn:c.program(13,y,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="foot">\n		',u=n["if"].call(t,(o=t.buttons,o==null||o===!1?o:o.visible),{hash:{},inverse:c.noop,fn:c.program(15,b,i),data:i});if(u||u===0)s+=u;s+='\n	</div>\n</div>\n<div class="modal-overlay',u=n["if"].call(t,t.darkOverlay,{hash:{},inverse:c.noop,fn:c.program(26,C,i),data:i});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,t.hideModalOverlay,{hash:{},inverse:c.noop,fn:c.program(28,k,i),data:i});if(u||u===0)s+=u;return s+='"></div>\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-view",function(e){"use strict";var t,n;t={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",modalOverlay:".modal-overlay",subviewContent:".content.subview",modalContent:".body .content"},options:{}},n={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this},activate:function(){var n=this.get("container"),r=this;return this.get("showCancelX")&&this.registerEventHandler(n.one(t.css.closeX).on("click",e.bind(this.handleCancel,this))),this.get("showCancelButton")&&this.registerEventHandler(n.one(t.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showActionButton")&&this.registerEventHandler(n.one(t.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.get("dismissOnOverlayClick")&&this.registerEventHandler(n.one(t.css.modalOverlay).on("click",e.bind(this.handleCancel,this))),this.registerEventHandler(e.on("history:change",e.bind(this.close,this))),this.get("subview")&&(r.get("subview").activate(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){r.reposition()})),this.fire("activated"),this},show:function(){return this.initialize(),this.freeze(),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled")},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal()){var r=this,i=e.one(t.css.destinationContainer),s;s={showCancelX:this.get("showCancelX"),title:this.get("title"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList")},this.get("buttonFlavorText")&&(s.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerHTML(this.templates("fluid-modal")(s)),n.modal.width=this.get("width"),n.modal.height=this.get("height"),this.get("subview")?(this.get("subview").appContext=r.appContext,this.get("subview").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&r.fire.apply(r,e.details)}),r.get("container").one(t.css.subviewContent).appendChild(e.get("container")),i&&(i.append(r.get("container")),r.reposition()),r.activate()})):(i&&(i.append(this.get("container")),this.reposition()),this.activate())}return this},alreadyShowingModal:function(){var t=e.one("."+this.name+" .modal");return t!==null},reposition:function(){var r=this.get("container"),i=r.one(".modal"),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=n.modal.width?parseInt(n.modal.width,10):parseInt(i.getComputedStyle("width"),10),f=Math.round(o/2)-Math.round(a/2)+e.DOM.docScrollX(),l,c;n.modal.height&&(i.setStyles({maxHeight:"none"}),i.one(t.css.modalContent).setStyles({maxHeight:n.modal.height+"px"})),l=parseInt(i.getComputedStyle("height"),10),c=Math.round(u/2)-Math.round(l/2)+e.DOM.docScrollY(),i.setStyles({top:c+"px",left:f+"px",width:n.modal.width?a+"px":""})},handleCancel:function(e){this.fire("cancelClick",e),this.close(e)},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},close:function(e){var t=this.get("container");this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),this.fire("close",e),this.destroy()},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},actionButtonLabel:{value:"OK"},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{value:"Cancel"},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},height:{value:0},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-modal"],optionalRequires:["fluid"]});
YUI.add("fluid",function(e){"use strict";function n(){var n="",r=[];return!t.prefix&&"getComputedStyle"in e.config.win&&(r=Array.prototype.slice.call(e.config.win.getComputedStyle(e.config.doc.documentElement,"")),n=r.join("").match(/-(webkit|moz|ms)-/),n=n&&n.length>1?n[1]:"",t.prefix.raw=n.toLowerCase(),t.prefix.css="-"+n+"-",t.prefix.js=n.charAt(0).toUpperCase()+n.slice(1),t.prefix.dom="WebKit|Moz|MS".match(new RegExp("("+n+")","i"))[1]),t.prefix}function r(t,n){return n=n||e.config.win,new e.Promise(function(r,i){setTimeout(e.bind(function(){r(t.call(n))},n),1)})}function i(e,n,r){return t.prefix.css!==""?r.getDOMNode().style.setProperty(t.prefix.css+e,n,null):r.setStyle(e,n),r}function s(n){var r=!1;return n+="",r=n in e.config.doc.body.style,r||(n=n.charAt(0).toUpperCase()+n.slice(1),r=t.prefix.raw+n in e.config.doc.body.style),r}function o(n){return new e.Promise(function(e,r){t.loadImage.imageQueue.push({src:n,done:e,error:r}),u()})}function u(){var e=null;t.loadImage.availabeWorkers.length&&t.loadImage.imageQueue.length&&(e=t.loadImage.availabeWorkers.shift(),e.work=t.loadImage.imageQueue.shift(),e.finished=function(e){return function(n){n.target.removeEventListener("load",e.finished),n.target.removeEventListener("error",e.finished),n.type==="load"?e.work.done(e.work.src):n.type==="error"&&e.work.error(e.work.src),e.work=null,e.loaded=null,e.errored=null,t.loadImage.availabeWorkers.push(e),u()}}(e),e.image.addEventListener("load",e.finished),e.image.addEventListener("error",e.finished),e.image.src=e.work.src)}function a(n){return n="https:"+n,new e.Promise(function(e,r){t.loadImageFastLane.imageHash[n]={done:e,error:r},t.loadImageFastLane.imageQueue.push(n),f()})}function f(){var e,n;t.loadImageFastLane.currentWorkers<t.loadImageFastLane.maxWorkers&&t.loadImageFastLane.imageQueue.length&&(e=t.loadImageFastLane.imageQueue.shift(),n=l(),n.onmessage=function(e){var n=e.data;t.loadImageFastLane.imageHash[n].done(n),t.loadImageFastLane.currentWorkers--,f()}.bind(this),n.postMessage(e),t.loadImageFastLane.currentWorkers++)}function l(){var e=window.URL||window.webkitURL,t;return t=e.createObjectURL(new Blob(["(",function(){self.onmessage=function(e){var t=new XMLHttpRequest,n=e.data;t.responseType="blob",t.onerror=function(){self.postMessage(n),self.close()},t.onload=function(){self.postMessage(n),self.close()},t.open("GET",n,!0),t.withCredentials=!0,t.send()}}.toString(),")()"],{type:"application/javascript"})),new Worker(t)}var t={prefix:{raw:"",css:"",js:"",dom:""},loadImage:{maxWorkers:8,currentWorkers:0,imageQueue:[],availabeWorkers:[],workingWorkers:[]},loadImageFastLane:{maxWorkers:8,currentWorkers:0,imageHash:{},imageQueue:[],availabeWorkers:[],workingWorkers:[]}};(function(){var r=0;for(r=0;r<t.loadImage.maxWorkers;r++)t.loadImage.availabeWorkers.push({image:new Image,loaded:null,work:null});n()})(),e.fluid={determineBrowserPrefix:n,setStylePrefixed:i,supports:s,prefix:t.prefix,chill:r,loadImage:o,loadImageFastLane:a}},"@VERSION@",{requires:["flickr-promise"],optional:[],affinity:"client"});
YUI.add("model-proxy",function(e){e.getModelProxyConstructor=function(t){function r(e){return function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift(this.id),t[e].apply(t,n)}}var n;return n=function(e){this.id=e,this.registry=t,this.isModel=!0},n.prototype={},e.getModelProxyConstructor.skipList.forEach(function(e){n.prototype[e]=function(){var t="[ModelProxy] The registry method `"+e+"` isn't exposed on the model, because it should be called via the registry.";throw this.registry.appContext.warn(t),new Error(t)}}),e.Object.each(t,function(t,i){if(n.prototype[i])return;if(i.indexOf("_")===0)return;if(!e.Lang.isFunction(t))return;if(Object.keys(t.prototype).length>0)return;n.prototype[i]=r(i)},this,!0),n},e.getModelProxyConstructor.skipList=["add","get","load","proxy","remoteRead","remoteCreate","attributeSearch","removeAll","getCount"]},"@VERSION@",{requires:[]});
YUI.add("flickr-collection",function(e){var t={},n;n=e.FlickrCollection=function(e,t,n){this.registry=e,this.id=t,this.attrName=n,this._data=[],this.fetchedStart=!1,this.fetchedEnd=!1,this.totalItems=Number.MAX_VALUE},n.prototype={constructor:n,push:function(e){var t=this._data.concat();t.push(e),this.registry.setValue(this.id,this.attrName,t)},unshift:function(e){var t=this._data.concat();t.unshift(e),this.registry.setValue(this.id,this.attrName,t)},concat:function(e){var t=this._data.concat(e);this.registry.setValue(this.id,this.attrName,t)},remove:function(e){typeof e=="string"&&(e={id:e});var t=this.find(e,!0),n;return t&&(n=this._data.concat(),n.splice(t.index,1),this.registry.setValue(this.id,this.attrName,n)),t&&t.value},find:function(e,t){if(!e)return null;var n=null,r=Object.keys(e);return this._data.some(function(t,i){if(!t)return;if(r.every(function(n){return t[n]===e[n]}))return n={value:t,index:i},!0}),t?n:n?n.value:null},getFirstItem:function(){var e,t;for(e=0;e<this._data.length;e++){t=this._data[e];if(t)return{item:t,index:e}}return null},getLastItem:function(){var e,t;for(e=this._data.length-1;e>=0;e--){t=this._data[e];if(t)return{item:t,index:e}}return null},getList:function(){return this._data.concat()},size:function(){return this._data.length},toJSON:function(){var t=[];return e.Array.each(this.getList(),function(e){e&&t.push(e.toJSON())}),t},toString:function(){return this.registry.name+'["'+this.attrName+'"]'},appendToListMulti:function(e){this.concat(e)},appendToList:function(e){this.push(e)},prependToList:function(e){this.unshift(e)},getFromListByID:function(e,t){var n={},r;return n[t||"id"]=e,r=this.find(n),r?r:undefined},removeFromList:function(e,t){var n={};return n[t||"id"]=e,this.remove(n)},hasMinBoundary:function(){return this.fetchedStart},hasMaxBoundary:function(){return this.fetchedEnd},_setValue:function(e){this._data=e}},e.FlickrCollection.executeFetch=function(n,r,i,s){var o,u;return!s||!e.Lang.isFunction(s.run)?e.Promise.reject("(flickr-collection::executeFetch) invalid fetcher for "+r.name+"["+i+"]"):(o=JSON.stringify(n),u=t[o],u?u:(t[o]=s.run.call(s,n,r.appContext).then(function(e){return delete t[o],e},function(e){throw delete t[o],e}),t[o]))}},"@VERSION@",{requires:[]});
